{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\eew\\\\bichomania-app\\\\frontend\\\\ayuda\\\\src\\\\responder-las-encuestas\\\\responder-encuestas.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ResponderEncuestas() {\n  _s();\n  const [encuestas, setEncuestas] = useState([]);\n  const [seleccionada, setSeleccionada] = useState(null);\n  const [detalles, setDetalles] = useState([]);\n  const idCliente = localStorage.getItem(\"id_usuario\");\n  useEffect(() => {\n    cargarEncuestas();\n  }, []);\n  const cargarEncuestas = async () => {\n    const res = await fetch(`${process.env.REACT_APP_API_URL}/encuestas-activas`);\n    const encuestasActivas = await res.json();\n    const filtradas = [];\n    for (const e of encuestasActivas) {\n      const resp = await fetch(`${process.env.REACT_APP_API_URL}/ya-voto/${idCliente}/${e.id_encuesta}`);\n      const data = await resp.json();\n      if (!data.yaVoto) {\n        filtradas.push(e);\n      }\n    }\n    setEncuestas(filtradas);\n  };\n  const seleccionarEncuesta = async encuesta => {\n    setSeleccionada(encuesta);\n    const res = await fetch(`${process.env.REACT_APP_API_URL}/detalles-encuesta/${encuesta.id_encuesta}`);\n    const data = await res.json();\n    setDetalles(data);\n  };\n  const votar = async detalle => {\n    await fetch(\"http://localhost:3001/votar\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        idCliente,\n        idEncuesta: seleccionada.id_encuesta,\n        idDetalle: detalle.id_detalle\n      })\n    });\n    setEncuestas(encuestas.filter(e => e.id_encuesta !== seleccionada.id_encuesta));\n    setSeleccionada(null);\n    alert(\"¡Voto registrado!\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Encuestas Disponibles\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), encuestas.length === 0 && seleccionada === null && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No tienes encuestas disponibles para responder.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }, this), seleccionada === null ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: encuestas.map(e => /*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          marginBottom: \"10px\",\n          cursor: \"pointer\",\n          padding: \"10px\",\n          border: \"1px solid #ccc\",\n          borderRadius: \"6px\"\n        },\n        onClick: () => seleccionarEncuesta(e),\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: e.descripcion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: [e.fecha_inicio, \" \\u2192 \", e.fecha_fin]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 29\n        }, this)]\n      }, e.id_encuesta, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: seleccionada.descripcion\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSeleccionada(null),\n        children: \"Volver\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: detalles.map(d => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            padding: \"12px\",\n            marginTop: \"10px\",\n            border: \"1px solid #aaa\",\n            borderRadius: \"6px\",\n            cursor: \"pointer\"\n          },\n          onClick: () => votar(d),\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: d.opcion_equipo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 33\n          }, this), \" \\u2013 \", d.opcion_liga, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: d.categoria\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 33\n          }, this)]\n        }, d.id_detalle, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n_s(ResponderEncuestas, \"YNZw4pVj3nMOXCsqkB4st4pM388=\");\n_c = ResponderEncuestas;\nvar _c;\n$RefreshReg$(_c, \"ResponderEncuestas\");","map":{"version":3,"names":["useEffect","useState","jsxDEV","_jsxDEV","ResponderEncuestas","_s","encuestas","setEncuestas","seleccionada","setSeleccionada","detalles","setDetalles","idCliente","localStorage","getItem","cargarEncuestas","res","fetch","process","env","REACT_APP_API_URL","encuestasActivas","json","filtradas","e","resp","id_encuesta","data","yaVoto","push","seleccionarEncuesta","encuesta","votar","detalle","method","headers","body","JSON","stringify","idEncuesta","idDetalle","id_detalle","filter","alert","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","marginBottom","cursor","border","borderRadius","onClick","descripcion","fecha_inicio","fecha_fin","d","marginTop","opcion_equipo","opcion_liga","categoria","_c","$RefreshReg$"],"sources":["C:/Users/USER/Documents/eew/bichomania-app/frontend/ayuda/src/responder-las-encuestas/responder-encuestas.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport default function ResponderEncuestas() {\r\n    const [encuestas, setEncuestas] = useState([]);\r\n    const [seleccionada, setSeleccionada] = useState(null);\r\n    const [detalles, setDetalles] = useState([]);\r\n\r\n    const idCliente = localStorage.getItem(\"id_usuario\");\r\n\r\n    useEffect(() => {\r\n        cargarEncuestas();\r\n    }, []);\r\n\r\n\r\n    const cargarEncuestas = async () => {\r\n        const res = await fetch(`${process.env.REACT_APP_API_URL}/encuestas-activas`);\r\n        const encuestasActivas = await res.json();\r\n\r\n        const filtradas = [];\r\n\r\n        for (const e of encuestasActivas) {\r\n            const resp = await fetch(`${process.env.REACT_APP_API_URL}/ya-voto/${idCliente}/${e.id_encuesta}`);\r\n            const data = await resp.json();\r\n\r\n            if (!data.yaVoto) {\r\n                filtradas.push(e);\r\n            }\r\n        }\r\n\r\n        setEncuestas(filtradas);\r\n    };\r\n\r\n\r\n    const seleccionarEncuesta = async (encuesta) => {\r\n        setSeleccionada(encuesta);\r\n\r\n        const res = await fetch(`${process.env.REACT_APP_API_URL}/detalles-encuesta/${encuesta.id_encuesta}`);\r\n\r\n        const data = await res.json();\r\n        setDetalles(data);\r\n    };\r\n\r\n\r\n    const votar = async (detalle) => {\r\n        await fetch(\"http://localhost:3001/votar\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n                idCliente,\r\n                idEncuesta: seleccionada.id_encuesta,\r\n                idDetalle: detalle.id_detalle\r\n            })\r\n        });\r\n\r\n        setEncuestas(encuestas.filter(e => e.id_encuesta !== seleccionada.id_encuesta));\r\n\r\n        setSeleccionada(null);\r\n\r\n        alert(\"¡Voto registrado!\");\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: \"20px\" }}>\r\n            <h2>Encuestas Disponibles</h2>\r\n\r\n            {encuestas.length === 0 && seleccionada === null && (\r\n                <p>No tienes encuestas disponibles para responder.</p>\r\n            )}\r\n\r\n            {seleccionada === null ? (\r\n                <ul>\r\n                    {encuestas.map(e => (\r\n                        <li\r\n                            key={e.id_encuesta}\r\n                            style={{\r\n                                marginBottom: \"10px\",\r\n                                cursor: \"pointer\",\r\n                                padding: \"10px\",\r\n                                border: \"1px solid #ccc\",\r\n                                borderRadius: \"6px\"\r\n                            }}\r\n                            onClick={() => seleccionarEncuesta(e)}\r\n                        >\r\n                            <strong>{e.descripcion}</strong>\r\n                            <br />\r\n                            <small>{e.fecha_inicio} → {e.fecha_fin}</small>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            ) : (\r\n                <div>\r\n                    <h3>{seleccionada.descripcion}</h3>\r\n\r\n                    <button onClick={() => setSeleccionada(null)}>\r\n                        Volver\r\n                    </button>\r\n\r\n                    <ul>\r\n                        {detalles.map(d => (\r\n                            <li\r\n                                key={d.id_detalle}\r\n                                style={{\r\n                                    padding: \"12px\",\r\n                                    marginTop: \"10px\",\r\n                                    border: \"1px solid #aaa\",\r\n                                    borderRadius: \"6px\",\r\n                                    cursor: \"pointer\"\r\n                                }}\r\n                                onClick={() => votar(d)}\r\n                            >\r\n                                <strong>{d.opcion_equipo}</strong> – {d.opcion_liga}\r\n                                <br />\r\n                                <small>{d.categoria}</small>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}